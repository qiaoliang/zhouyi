# 生成测试用例总纲

你是一个测试用例文档生成专家。根据测试用例组织规则文档，生成测试用例总纲文档。

## 任务目标

在测试用例组织规则文档相同的目录下生成 `01-【产品名-版本号】测试用例总纲.md` 文件。

## 执行步骤

### Step 1: 确定测试用例组织规则文档

**询问用户**：
"请指定测试用例组织规则文档的路径（默认：docs/testcases/00-通用规范-测试用例组织规则.md）"

等待用户回答。

**检查文件是否存在**：
- 如果文件不存在，提示用户：
  "⚠️ 未找到测试用例组织规则文档。请先运行 `create-main-rule` 创建组织规则文档，或指定正确的路径。"

### Step 2: 读取组织规则文档并提取信息

读取组织规则文档，提取以下信息：

1. **产品信息**：
   - 产品名称
   - 版本号
   - 产品缩写

2. **模块信息**：
   - 模块名称列表
   - 模块缩写
   - 模块说明（如有）

3. **负责人信息**：
   - 搜索文档中是否有"负责人"相关内容
   - 如有则使用，如无则使用【待指定负责人】

### Step 3: 分析各模块用例范围

对于每个模块，使用 Task 工具调用 Explore subagent 分析：

```
请分析 [模块名] 的功能，提取该模块的主要功能点，用于编写测试用例范围说明（3-5句话概括）。
```

设置 thoroughness 为 "quick"。

### Step 4: 向用户确认

将提取的信息展示给用户确认：

```
📋 测试用例总纲信息确认：

产品名称：[产品名]
版本号：[版本]
输出文件：01-【产品名-版本号】测试用例总纲.md

模块列表：
- [模块1] - 用例范围：[AI生成的范围说明]
  负责人：[从组织规则提取 或 待指定负责人]
  状态：更新中

- [模块2] - 用例范围：[AI生成的范围说明]
  负责人：[从组织规则提取 或 待指定负责人]
  状态：更新中

以上信息是否正确？如需修改请告知。
```

等待用户确认或修改。

### Step 5: 获取总纲模板

按以下优先级读取模板：

1. **项目自定义模板**：`rules/01-xxx应用-测试用例总纲模板.md`
2. **全局包模板**：`~/.claude/skills/test-case-management/templates/01-xxx应用-测试用例总纲模板.md`
3. **内置默认模板**（以下内容）：

```markdown
# 测试用例总纲文件的模板说明

本文是编写和维护本项目测试用例总纲的规范要求。当你修改`项目测试用例总纲`时，应该先读取并理解本文的规范要求。

## 测试用例总纲的文件名要求

文件名应该是：`01-【XXXX应用】测试用例总纲.md`。
例如，当应用名为`安全守护V0.1`时，本文件名就应该为 `01-【安全守护V0.1】测试用例总纲.md`。


# 测试用例总纲的文件内容与格式

在文件模板如下所示，其中：

1. 在`【`和`】`之间的内容应该以项目实际内容填写。
2. 【 xxxx APP 】 和 模块的名称以模板中第一节所提到的关联文件《测试用例组织规则.md》为准。
3. 如果有多个模块，可以以些类推进行增加。

```text
# 【 xxxx应用 】测试用例总纲

## 一、文件说明
1.  作用：导航所有模块用例文件，标注文件状态、用例范围；
2.  更新频率：新增/删除模块文件后1个工作日内同步；
3.  关联文件：《测试用例组织规则.md》（[点击查看](./00-【通用规范】测试用例组织规则.md)）。

## 二、模块文件导航（按业务排序）
### 🏠 【模块AAA的名称】
- 文件路径：[02-【xxxx应用】-【模块AAA的名称】-测试用例.md](./02-【xxxxAPP】-【模块AAA的名称】-测试用例.md)
- 用例范围：【该模块中主要的功能】
- 状态：【更新中/已更新】
- 负责人：XXX

### 🏠 【模块BBB的名称】
- 文件路径：[03-【xxxx应用】-【模块BBB的名称】-测试用例.md](./02-【xxxxAPP】-【模块BBB】-测试用例.md)
- 用例范围：【该模块中主要的功能】
- 状态：【更新中/已更新】
- 负责人：XXX


## 三、专项测试文件（跨模块）
### 📱 兼容性测试
- 文件路径：[06-【小红书V8.0】-【全模块】-兼容性测试用例.md](./06-【小红书V8.0】-【全模块】-兼容性测试用例.md)
- 用例范围：iOS/Android不同机型、系统版本适配（共30条用例）
- 状态：已完成
- 负责人：XXX

### ⚡ 性能测试
- 文件路径：[07-【小红书V8.0】-【全模块】-性能测试用例.md](./07-【小红书V8.0】-【全模块】-性能测试用例.md)
- 用例范围：加载速度、并发操作、资源占用（共15条用例）
- 状态：已完成
- 负责人：XXX
```

### Step 6: 生成目标文档

根据模板生成文档，遵循以下规则：

**动态替换的内容：**
- 【xxxx应用】：替换为实际的产品名-版本号（如：周易通V1.0）
- 【模块AAA的名称】：替换为实际的模块名
- 文件路径：根据实际模块名生成链接
- 用例范围：AI 分析生成的功能说明
- 负责人：从组织规则提取或【待指定负责人】
- 状态：默认为"更新中"

**专项测试部分：**
- 生成空模板，供后续填充
- 包含兼容性测试、性能测试等常见类型

### Step 7: 写入文件

1. 确定输出目录：与组织规则文档相同
2. 文件名：`01-【产品名-版本号】测试用例总纲.md`
3. 写入文件

### Step 8: 报告完成

告知用户总纲已生成，并提供文件路径。

如果使用了全局包模板或内置默认模板，同时提示用户：
"💡 提示：如需自定义模板，可以从全局包复制模板到项目：
   cp ~/.claude/skills/test-case-management/templates/01-xxx应用-测试用例总纲模板.md rules/"

## 注意事项

1. **文件链接**：
   - 确保组织规则文档的链接正确
   - 模块文件路径与组织规则保持一致

2. **专项测试部分**：
   - 默认生成空模板
   - 用户可根据需要添加或删除专项测试类型

3. **负责人处理**：
   - 优先从组织规则文档提取
   - 没有则使用【待指定负责人】占位符

4. **交互原则**：
   - 关键信息必须向用户确认
   - 给用户修改的机会
