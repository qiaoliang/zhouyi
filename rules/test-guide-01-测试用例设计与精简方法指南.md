# 测试用例设计与精简方法指南

本文档旨在提供测试用例的设计方法，以形成全面的测试用例覆盖。

## 测试用例设计方法与技巧

请结合以下用例设计方法进行用例设计

1. **等价类划分(Equivalence Class Partitioning)**

- 将输入数据划分为有效的和无效的等价类。
- 从每个等价类中选取一个或少数代表性数据作为测试输入。

2. **边界值分析(边界值分析)**

- 重点测试输入和输出的边界条件(例如:最小值、最大值、略高于最小值、略低于最大值、空值、临界长度等)。
- 边界值分析是等价类划分的补充。

3. **判定表驱动法(决策表测试)**

- 适用于有多个条件组合，并且每个组合对应不同操作的场景。
- 列出所有条件桩和动作桩，形成判定表。

4. **场景法(Use Case/Scenario Testing)**

基于用户实际使用系统的场景来设计测试用例。模拟用户操作流程，验证系统在真实场景下的行为。

5. **误测法(Error Guessing)**

- 基于经验、直觉和对系统薄弱环节的分析，推测可能存在的缺陷和错误。
- 常用于补充其他结构化测试方法。

6. **状态转换测试**

- 适用于被测对象具有明确状态转换的系统或模块。
- 关注系统在不同状态之间的转换路径和事件触发。

## 测试用例的剪裁

### 为什么要剪裁

如果按照上面的设计方法，会出现测试用例相互重复或重叠，导致测试用例的数量爆炸，但却没有太多的意义。所以，必须在保证测试用例正确性的前提下，尽可能精简测试用例中的执行流程和用例数量。

### 如何对测试用例进行剪裁

**总原则**：平衡覆盖质量与执行效率

测试用例筛选的核心目标是 **“剔除冗余、聚焦核心、控制数量”**，在不降低测试覆盖率（核心场景、边界、异常）的前提下，避免重复执行和无效劳动。


#### 核心原则1：核心功能/主流程优先保留（“必测路径不遗漏”）

1. 定义
优先保留覆盖 **核心业务流程、主场景、关键功能点** 的用例，剔除边缘功能、低频场景的重复用例——核心功能是系统“生命线”，缺陷影响范围最大，需100%覆盖。

2. 操作方法
  - 先梳理“核心业务流程图”（如小红书“发布笔记→审核→展示→互动”），确保每个关键节点至少1条用例；
  - 边缘功能（如“笔记标题字体大小自定义”“历史搜索记录批量删除”）按“1个功能点≤2条用例”控制，仅保留有效等价类和关键边界。

3. 示例
  - 保留：小红书“登录后发布笔记（图文+文案+话题）→ 成功展示在推荐流”（主流程）、“发布笔记时网络中断→ 草稿自动保存”（核心异常）；
  - 剔除：“发布笔记时连续切换10次字体颜色”（低频操作，无实际业务价值）、“未登录状态下点击发布按钮→ 提示登录”（已被“发布功能前置条件”覆盖，无需单独用例）。


#### 核心原则2：等价类合并，去重冗余用例（“一类数据选代表”）

1. 定义

  基于“等价类划分法”，同一等价类（有效/无效）中仅保留1-2条代表性用例，剔除重复验证同一逻辑的用例——同一等价类内的数据具有相同测试效果，无需全量执行。
2. 操作方法
  - 对输入型用例（如搜索关键词、表单填写），按“有效等价类+关键无效等价类”分组；
  - 有效等价类：保留“典型值+常用值”（如搜索关键词“减脂餐”“旅行攻略”，无需覆盖所有美食类关键词）；
  - 无效等价类：保留“边界无效值+典型无效值”（如特殊字符、超长文本，无需覆盖所有符号组合）。
3. 示例
  - 原始用例（冗余）：搜索关键词输入“减脂餐”“健身餐”“低卡餐”（均属于“有效美食关键词”等价类）；
  - 筛选后：仅保留“输入‘减脂餐’（典型有效值）”1条用例，剔除“健身餐”“低卡餐”（逻辑重复，验证效果一致）；
  - 补充：无效等价类仅保留“输入特殊字符!@#$%（典型无效）”“输入50字超长文本（边界无效）”，剔除“输入空格”“输入字母+数字混合无意义字符”（与特殊字符验证逻辑重复）。


#### 三、核心原则3：边界值优先，普通值适当精简（“缺陷高发区不缺位”）

1. 定义
  边界条件是缺陷高发区（如输入长度上限、数值临界值、时间节点），需100%保留边界用例；普通值（非边界）若已被等价类覆盖，可适当删减。
2. 操作方法
  - 列出所有边界场景（如“用户名长度6-20位”的边界：5位、6位、20位、21位）；
  - 保留“略低于边界+边界值+略高于边界”3类用例，剔除普通中间值（如7位、15位，若6位和20位已验证通过，中间值无需重复）。
3. 示例
  - 保留：小红书“话题标签长度1-30字”的用例（1字、30字、31字）、“发布笔记图片数量1-9张”的用例（1张、9张、10张）；
  - 剔除：话题标签20字、图片数量5张（普通中间值，无边界风险，等价类已覆盖）。


#### 四、核心原则4：场景关联性筛选，避免流程重复（“同一流程不反复”）

1. 定义
  基于“场景法”设计的用例，若多个用例共享同一前置流程（如“登录→进入首页→操作”），仅保留“流程完整+验证点不同”的用例，剔除“流程重复+验证点重叠”的用例。
2. 操作方法
  - 按“前置流程+核心验证点”分组，同一组内仅保留“覆盖最多验证点”的用例；
  - 复杂流程可拆分为“基础流程用例+分支验证用例”，避免全流程重复编写。
3. 示例
  - 原始用例（流程重复）：
    1. 登录→首页→推荐流点赞→验证点赞数+1；
    2. 登录→首页→推荐流收藏→验证收藏数+1；
    3. 登录→首页→推荐流评论→验证评论数+1；
  - 筛选后：
    1. 保留“登录→首页→推荐流点赞→验证点赞数+1”（基础流程用例）；
    2. 其余2条用例简化为“已登录→首页→推荐流收藏→验证收藏数+1”“已登录→首页→推荐流评论→验证评论数+1”（省略重复的“登录”步骤描述，通过“前置条件=已登录”覆盖）；
  - 核心：避免3条用例都完整编写“登录→首页”流程，仅保留1次完整流程，其余通过前置条件简化。


#### 五、核心原则5：风险驱动筛选，聚焦高风险模块（“风险越高越聚焦”）
1. 定义
  基于“历史缺陷数据、需求变更频率、模块复杂度”筛选，高风险模块（如支付、登录、数据同步）保留更多用例，低风险模块（如静态展示页、辅助功能）适当精简。
2. 操作方法
  - 标注模块风险等级（高/中/低）：
    - 高风险：历史缺陷率≥30%、需求变更频繁（迭代≥2次/月）、核心业务模块（支付、登录）；
    - 低风险：静态页面（关于我们、帮助中心）、无用户交互的展示功能；
  - 高风险模块：用例覆盖率≥90%，保留所有边界、异常、场景用例；
  - 低风险模块：用例覆盖率≥60%，仅保留核心功能和关键异常用例。
3. 示例
  - 高风险模块（如“发布笔记”）：保留“图文/视频上传、文案编辑、话题添加、权限设置、网络异常、草稿保存”等所有场景用例（约20条）；
  - 低风险模块（如“个人中心-关于我们”）：仅保留“点击关于我们→页面正常展示”“点击版本号→显示当前版本”2条用例，剔除“连续点击10次版本号”“切换语言后展示”等冗余用例。

#### 六、核心原则6：优先级动态调整，剔除低优先级冗余（“资源倾斜核心”）
1. 定义
  按用例优先级（高/中/低）筛选，优先保留高优先级用例（核心功能、边界、异常），中优先级用例按测试资源取舍，低优先级用例（边缘场景、极端条件）仅在资源充足时保留。

2. 操作方法
  - 明确优先级定义（与团队达成共识）：
    - 高优先级：核心功能、主流程、边界条件、严重异常（如崩溃、数据丢失）；
    - 中优先级：次要功能、普通异常（如提示文案错误）、兼容性场景；
    - 低优先级：极端场景（如断网后立即联网、连续操作100次）、小众需求（如适配老旧机型iOS 9）；
  -  筛选规则：高优先级100%保留，中优先级保留70%-80%，低优先级保留≤30%。
3. 示例
- 保留：高优先级（登录失败→提示正确文案）、中优先级（iOS 14+兼容性）；
- 剔除：低优先级（iOS 9适配、连续刷新50次推荐流）。


#### 七、核心原则7：有效性验证，剔除无效/过时用例（“无效用例不占用资源”）
1. 定义
  定期清理“不可执行、需求变更后失效、验证点无意义”的用例，避免无效劳动。
2. 操作方法
  - 无效用例判定标准：
    - 不可执行：步骤缺失、前置条件无法满足（如依赖已下线的接口）；
    - 过时：需求变更后功能删除/修改（如小红书取消“笔记置顶功能”，对应用例失效）；
    - 无意义：验证点无法量化（如“页面展示正常”，无明确判定标准）；
  - 筛选动作：直接删除无效/过时用例，对“验证点模糊”的用例优化后保留（如将“页面展示正常”改为“页面元素无重叠、文案与设计稿一致”）。
3. 示例
  - 剔除：“点击首页已下线的‘直播入口’→ 跳转至直播页”（功能下线，用例无效）、“推荐流内容展示美观”（验证点模糊，无判定标准）；
  - 保留并优化：“推荐流笔记封面比例为1:1”（验证点量化，可执行）。


#### 八、核心原则8：覆盖率兜底，避免关键场景遗漏（“筛选后不缺核心”）
1. 定义
  筛选后需验证“测试覆盖率”，确保核心功能点、边界条件、异常场景无遗漏，避免为了精简而牺牲覆盖质量。
2. 操作方法
  - 用“功能点覆盖率”验证：核心功能点覆盖率≥95%，次要功能点≥80%；
  - 用“场景覆盖率”验证：主流程场景100%覆盖，异常场景≥85%；
  - 工具辅助（无工具时人工核查）：列出所有功能点/场景清单，逐一核对是否有对应用例。
3. 示例
- 功能点清单：小红书首页“推荐流加载、搜索、点赞、收藏、评论、导航切换”；
- 筛选后核查：确保每个功能点至少有1条核心用例，无遗漏（如未遗漏“推荐流无网络刷新失败”异常场景）。


## 筛选流程步骤
1. 先按“核心原则7（有效性）”清理无效/过时用例；
2. 按“核心原则1（核心功能）+ 原则3（边界）”保留必测用例；
3. 按“核心原则2（等价类合并）+ 原则4（场景关联）”剔除冗余用例；
4. 按“核心原则5（风险驱动）+ 原则6（优先级）”精简低价值用例；
5. 按“核心原则8（覆盖率）”兜底，补充遗漏的关键场景。

通过以上原则，可在保证测试质量的前提下，将用例数量进行精简，同时提升测试执行效率——核心是“聚焦用户真实场景、缺陷高发区、核心业务流程”，拒绝“为了覆盖而覆盖”的无效用例。
