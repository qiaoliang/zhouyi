# 周易通APP - 第三方服务集成清单

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | v1.0 |
| 创建日期 | 2026-01-11 |
| 文档状态 | 待申请 |

---

## 1. 服务清单概览

| 服务类别 | 服务名称 | 供应商 | 优先级 | 状态 |
|---------|---------|--------|--------|------|
| 用户登录 | 微信开放平台 | 腾讯 | P0 | 待申请 |
| 小程序 | 微信小程序 | 腾讯 | P0 | 待申请 |
| 短信验证 | 阿里云短信 | 阿里云 | P0 | 待申请 |
| 支付 | 微信支付 | 腾讯 | P0 | 待申请 |
| 支付 | 支付宝 | 蚂蚁集团 | P0 | 待申请 |
| 推送 | 极光推送 | 极光科技 | P0 | 待申请 |
| 云存储 | 阿里云OSS | 阿里云 | P0 | 待申请 |
| 云数据库 | 阿里云MongoDB | 阿里云 | P1 | 待申请 |
| 云缓存 | 阿里云Redis | 阿里云 | P1 | 待申请 |
| 服务器 | 阿里云ECS | 阿里云 | P1 | 待申请 |

---

## 2. 微信开放平台

### 2.1 服务说明

用于APP微信授权登录

### 2.2 所需材料

- [ ] 企业营业执照
- [ ] 企业对公账户信息
- [ ] 企业公章
- [ ] 法人身份证
- [ ] 应用图标 (1024x1024)
- [ ] 应用介绍

### 2.3 申请流程

```
1. 访问微信开放平台: https://open.weixin.qq.com/
2. 注册开发者账号 (企业认证)
3. 完成企业认证 (费用: 300元/年)
4. 创建移动应用
   - 提交应用信息
   - 上传应用图标
   - 填写应用简介
5. 等待审核 (1-7个工作日)
6. 审核通过后获取:
   - AppID
   - AppSecret
```

### 2.4 获取配置

```
申请成功后将获得:
- AppID: wxXXXXXXXXXXXXXXXX
- AppSecret: XXXXXXXXXXXXXXXXXXXXXXXXXXXX

存储位置: .env
WECHAT_APP_ID=wxXXXXXXXXXXXXXXXX
WECHAT_APP_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXX
```

---

## 3. 微信小程序

### 3.1 服务说明

用于开发和发布周易通小程序

### 3.2 所需材料

- [ ] 企业营业执照
- [ ] 企业对公账户信息
- [ ] 法人身份证
- [ ] 小程序名称 (周易通)
- [ ] 小程序简介
- [ ] 服务类目 (工具 > 算命/占卜)

### 3.3 申请流程

```
1. 访问微信公众平台: https://mp.weixin.qq.com/
2. 注册小程序账号
3. 完成小程序认证 (费用: 300元/年)
4. 配置小程序信息
   - 名称: 周易通
   - 简介: 专业易经卜卦工具
   - 头像: 上传Logo
   - 服务类目: 工具 > 算命/占卜
5. 配置服务器域名
   - request合法域名
   - socket合法域名
   - uploadFile合法域名
   - downloadFile合法域名
6. 配置业务域名 (H5跳转)
```

### 3.4 获取配置

```
申请成功后将获得:
- AppID (小程序): wxXXXXXXXXXXXXXXXX
- AppSecret (小程序): XXXXXXXXXXXXXXXXXXXXXXXXXXXX

存储位置: .env
MINI_PROGRAM_APP_ID=wxXXXXXXXXXXXXXXXX
MINI_PROGRAM_APP_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXX
```

### 3.5 注意事项

- 小程序名称需要与商标一致，建议先注册商标
- 服务类目可能需要提供资质证明
- 服务器域名必须HTTPS
- 业务域名需要ICP备案

---

## 4. 阿里云短信服务

### 4.1 服务说明

用于发送手机验证码

### 4.2 所需材料

- [ ] 阿里云账号
- [ ] 企业认证
- [ ] 签名申请文件
- [ ] 短信模板

### 4.3 申请流程

```
1. 登录阿里云: https://www.aliyun.com/
2. 开通短信服务
3. 申请短信签名
   - 签名名称: 周易通
   - 签名来源: 企事业单位
   - 上传证明文件
4. 申请短信模板
   - 模板类型: 验证码
   - 模板内容: "您的验证码是${code}，5分钟内有效。"
   - 变量说明: code是验证码
5. 等待审核 (1个工作日)
```

### 4.4 获取配置

```
申请成功后将获得:
- AccessKey ID: LTAI5txXXXXXXXXXXXXXXXXX
- AccessKey Secret: XXXXXXXXXXXXXXXXXXXXXXXXXXXX
- 签名名称: 周易通
- 模板CODE: SMS_XXXXXXXX

存储位置: .env
SMS_ACCESS_KEY_ID=LTAI5txXXXXXXXXXXXXXXXXX
SMS_ACCESS_KEY_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXX
SMS_SIGN_NAME=周易通
SMS_TEMPLATE_CODE=SMS_XXXXXXXX
```

### 4.5 资费标准

- 短信单价: ¥0.045/条
- 验证码短信通常限流: 1条/分钟

---

## 5. 微信支付

### 5.1 服务说明

用于APP和小程序内的微信支付

### 5.2 所需材料

- [ ] 企业营业执照
- [ ] 组织机构代码证
- [ ] 法人身份证
- [ ] 企业对公账户
- [ ] 门头照片

### 5.3 申请流程

```
1. 访问微信支付商户平台: https://pay.weixin.qq.com/
2. 提交商户资料
3. 签署协议
4. 账户验证 (打款验证)
5. 等待审核 (7个工作日)
```

### 5.4 获取配置

```
申请成功后将获得:
- 商户号(mch_id): 1XXXXXXXXX
- API密钥(API_KEY): XXXXXXXXXXXXXXXXXXXXXXXX
- APIv3密钥: XXXXXXXXXXXXXXXXXXXXXXXX
- 商户证书: apiclient_cert.p12
- 商户证书密钥

存储位置: .env
WECHAT_PAY_MCH_ID=1XXXXXXXXX
WECHAT_PAY_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXX
WECHAT_PAY_API_V3_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXX
WECHAT_PAY_CERT_PATH=./certs/apiclient_cert.p12
```

### 5.5 费率

- 费率: 0.6%
- 结算周期: T+1

---

## 6. 支付宝

### 6.1 服务说明

用于APP内的支付宝支付

### 6.2 所需材料

- [ ] 企业营业执照
- [ ] 法人身份证
- [ ] 企业对公账户

### 6.3 申请流程

```
1. 访问支付宝开放平台: https://open.alipay.com/
2. 创建应用
3. 签约手机网站支付或APP支付
4. 上传应用图标和截图
5. 等待审核 (3-7个工作日)
```

### 6.4 获取配置

```
申请成功后将获得:
- APPID: 2021XXXXXXXXXXX
- 应用私钥: (自己生成)
- 支付宝公钥: (从平台获取)

存储位置: .env
ALIPAY_APP_ID=2021XXXXXXXXXXX
ALIPAY_PRIVATE_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXX
ALIPAY_PUBLIC_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXX
```

### 6.5 费率

- 费率: 0.6%
- 结算周期: T+1

---

## 7. 极光推送

### 7.1 服务说明

用于APP消息推送

### 7.2 所需材料

- [ ] 应用名称
- [ ] 应用图标
- [ ] 应用介绍

### 7.3 申请流程

```
1. 访问极光官网: https://www.jiguang.cn/
2. 注册账号
3. 创建应用
   - 应用名称: 周易通
   - 应用图标: 上传
4. 获取AppKey和MasterSecret
5. 集成SDK
```

### 7.4 获取配置

```
申请成功后将获得:
- AppKey: XXXXXXXXXXXXXXXXXXXXXXXX
- MasterSecret: XXXXXXXXXXXXXXXXXXXXXXXX

存储位置: .env
JPUSH_APP_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXX
JPUSH_MASTER_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXX
```

### 7.5 免费额度

- 免费版: 100万DAU
- 超出后按量计费

---

## 8. 阿里云OSS

### 8.1 服务说明

用于存储图片等文件

### 8.2 申请流程

```
1. 登录阿里云
2. 开通对象存储OSS
3. 创建Bucket
   - 名称: zhouyi-app
   - 地域: 华东1 (杭州)
   - 读写权限: 私有
4. 配置CORS规则
5. 配置CDN加速 (可选)
```

### 8.3 获取配置

```
申请成功后将获得:
- AccessKey ID: LTAI5txXXXXXXXXXXXXXXXXX
- AccessKey Secret: XXXXXXXXXXXXXXXXXXXXXXXXXXXX
- Bucket名称: zhouyi-app
- Endpoint: oss-cn-hangzhou.aliyuncs.com

存储位置: .env
OSS_ACCESS_KEY_ID=LTAI5txXXXXXXXXXXXXXXXXX
OSS_ACCESS_KEY_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXX
OSS_BUCKET=zhouyi-app
OSS_REGION=oss-cn-hangzhou
OSS_ENDPOINT=https://zhouyi-app.oss-cn-hangzhou.aliyuncs.com
```

### 8.4 资费标准

- 存储费用: ¥0.12/GB/月
- 下行流量: ¥0.50/GB
- 请求次数: ¥0.01/万次

---

## 9. 阿里云MongoDB

### 9.1 服务说明

用于主数据库存储

### 9.2 申请流程

```
1. 登录阿里云
2. 开通云数据库MongoDB版
3. 创建实例
   - 版本: MongoDB 7.0
   - 规格: 1核2GB (起步)
   - 存储空间: 20GB
   - 副本集: 三节点
4. 设置白名单
5. 创建数据库账号
```

### 9.3 获取配置

```
申请成功后将获得:
- 连接串: mongodb://zhouyi:password@dds-xxxxx.mongodb.rds.aliyuncs.com:3717,dds-xxxxx.mongodb.rds.aliyuncs.com:3717/admin?replicaSet=mgset-xxxxx
- 数据库账号: zhouyi
- 数据库密码: (自定义)

存储位置: .env
MONGODB_URI=mongodb://zhouyi:password@host1:3717,host2:3717/zhouyi?replicaSet=xxx
```

### 9.4 资费标准

- 1核2GB + 20GB: 约 ¥300/月
- 2核4GB + 50GB: 约 ¥700/月

---

## 10. 阿里云Redis

### 10.1 服务说明

用于缓存和会话管理

### 10.2 申请流程

```
1. 登录阿里云
2. 开通云数据库Redis版
3. 创建实例
   - 版本: Redis 7.0
   - 规格: 256MB (起步)
   - 架构: 标准版
4. 设置白名单
5. 设置密码
```

### 10.3 获取配置

```
申请成功后将获得:
- 连接地址: r-xxxxx.redis.rds.aliyuncs.com
- 端口: 6379
- 密码: (自定义)

存储位置: .env
REDIS_HOST=r-xxxxx.redis.rds.aliyuncs.com
REDIS_PORT=6379
REDIS_PASSWORD=xxxxxxxxxx
REDIS_DB=0
```

### 10.4 资费标准

- 256MB: 约 ¥50/月
- 1GB: 约 ¥150/月

---

## 11. 阿里云ECS

### 11.1 服务说明

用于部署后端服务

### 11.2 申请流程

```
1. 登录阿里云
2. 购买ECS实例
   - 规格: 2核4GB (起步)
   - 操作系统: Ubuntu 22.04
   - 带宽: 5Mbps
   - 系统盘: 40GB SSD
3. 配置安全组规则
   - 开放端口: 80, 443, 22
4. 域名解析 (可选)
5. SSL证书配置
```

### 11.3 资费标准

- 2核4GB + 5Mbps + 40GB: 约 ¥200/月
- 4核8GB + 10Mbps + 40GB: 约 ¥500/月

---

## 12. 域名和SSL

### 12.1 域名申请

```
1. 选择域名注册商 (阿里云/腾讯云)
2. 搜索可用域名
   - zhouyi.com (可能已被注册)
   - zhouyiapp.com
   - zhouyi.cc
3. 购买域名 (约 ¥50-100/年)
4. 完成实名认证
5. 配置DNS解析
```

### 12.2 SSL证书

```
1. 购买或申请免费SSL证书
   - 阿里云免费证书 (1年有效)
   - Let's Encrypt (免费，90天有效)
2. 下载证书
3. 配置到Nginx/Apache
```

---

## 13. 费用预算

### 13.1 一次性费用

| 项目 | 费用 |
|------|------|
| 微信开放平台认证 | ¥300/年 |
| 微信小程序认证 | ¥300/年 |
| 域名注册 | ¥100/年 |
| 商标注册 (可选) | ¥300-1500 |
| **总计** | **¥700-2200/年** |

### 13.2 月度运营费用

| 项目 | 规格 | 月费 |
|------|------|------|
| ECS服务器 | 2核4GB | ¥200 |
| MongoDB | 1核2GB 20GB | ¥300 |
| Redis | 256MB | ¥50 |
| OSS存储 | 50GB | ¥6 |
| 短信 | 10000条/月 | ¥450 |
| 极光推送 | 免费版 | ¥0 |
| CDN流量 | 100GB | ¥50 |
| **MVP阶段合计** | | **¥1056/月** |

---

## 14. 申请优先级

### 第一优先级 (立即申请)

- [ ] 微信小程序账号 (开发调试必须)
- [ ] 微信开放平台账号 (APP登录必须)

### 第二优先级 (内测前申请)

- [ ] 阿里云ECS服务器
- [ ] 阿里云MongoDB
- [ ] 阿里云OSS
- [ ] 极光推送

### 第三优先级 (公测前申请)

- [ ] 阿里云短信服务
- [ ] 微信支付
- [ ] 支付宝
- [ ] 阿里云Redis
- [ ] 域名和SSL

---

## 15. 安全注意事项

### 15.1 密钥管理

```bash
# 所有密钥存储在 .env 文件
# .env 文件必须加入 .gitignore
# 不要将密钥提交到代码仓库

# 生产环境密钥使用云平台密钥管理服务
- 阿里云KMS
- 腾讯云KMS
```

### 15.2 权限最小化

```
为不同环境创建不同的密钥:
- 开发环境密钥
- 测试环境密钥
- 生产环境密钥

生产环境密钥权限:
- 禁止写入操作 (OSS除外)
- 限制IP白名单
- 设置每日消费上限
```

---

**文档编写**: Claude
**最后更新**: 2026-01-11
**维护周期**: 每月更新密钥和费用
