# 测试用例组织规则

## 一、文件命名规范

1. **通用文件**：序号-【通用规范】-文件名.md（序号00开头，唯一）；
2. **总纲文件**：序号-【周易通V1.0】-测试用例总纲.md（序号01开头，唯一）；
3. **模块文件**：序号-【周易通V1.0】-【模块名】-测试用例.md（序号从02递增，按模块排序）。

**示例**：
- `00-【通用规范】测试用例组织规则.md`
- `01-【周易通V1.0】测试用例总纲.md`
- `02-【周易通V1.0】-【用户系统】-测试用例.md`
- `03-【周易通V1.0】-【卜卦功能】-测试用例.md`

---

## 二、用例ID规范（全局唯一）

### 格式
```
ZYT-模块缩写-3位序号
```

### 模块缩写定义

| 模块名称 | 模块缩写 | 说明 |
|---------|---------|------|
| 用户系统 | USER | 注册登录、个人中心 |
| 卜卦功能 | DIV | 金钱课起卦、解卦 |
| 学习路径 | LRN | 课程、测验 |
| 每日一卦 | DAILY | 每日卦象推送 |
| 历史记录 | HIST | 卜卦记录查询 |
| 会员支付 | PAY | 会员购买、支付 |
| UI界面 | UI | 界面交互、样式 |

### ID示例

```
ZYT-USER-001  用户微信授权登录
ZYT-DIV-001   金钱课起卦-摇铜钱动画
ZYT-LRN-001   学习路径-课程列表加载
ZYT-DAILY-001 每日一卦-卦象推送
ZYT-HIST-001  历史记录-记录查询
ZYT-PAY-001   会员购买-微信支付
ZYT-UI-001    首页-底部导航栏切换
```

---

## 三、4层层级定义（对应Markdown标题）

| Markdown层级 | 对应结构层级 | 定义 | 命名规范 |
|--------------|--------------|------|----------|
| # | 1级 | 产品/文件标识 | 模块文件：【周易通V1.0】-【模块名】-测试用例 |
| ## | 2级 | 核心功能模块 | 名词短语（≤8字，如：用户登录、金钱课起卦） |
| ### | 3级 | 功能点/子场景 | 动词+名词（如：微信授权登录、验证码校验） |
| #### | 4级 | 具体测试用例 | 场景+动作+验证点（如：未登录-微信授权-获取用户信息） |

---

## 四、用例必备要素（每个4级用例必含）

### 1. 用例ID
按规范标注，置于用例名称后，格式：`ZYT-模块缩写-序号`

### 2. 优先级
- **高**：核心业务流程、涉及支付、数据安全
- **中**：次要功能、辅助流程
- **低**：边缘场景、异常提示、UI细节

### 3. 测试类型
- **功能**：业务逻辑验证
- **性能**：响应时间、并发能力
- **兼容性**：平台版本、屏幕尺寸
- **异常**：错误处理、边界条件
- **UI**：界面样式、交互体验

### 4. 前置条件
≤3条，明确环境、状态要求

**示例**：
- 用户已安装微信APP
- 用户已授权微信登录
- 网络连接正常

### 5. 测试步骤
按顺序编写，每步1个动作，序号递增

**示例**：
```
1. 打开周易通APP
2. 点击"微信一键登录"按钮
3. 在微信授权页面点击"同意"
4. 返回APP首页
```

### 6. 预期结果
与步骤一一对应，可量化、可判断Pass/Fail

**示例**：
```
1. APP启动成功，显示登录页面
2. 跳转至微信授权页面
3. 授权成功
4. 自动登录成功，显示用户头像和昵称，跳转至首页
```

### 7. 备注（可选）
特殊说明、依赖数据、缺陷关联、测试数据

---

## 五、已实现功能模块清单

根据当前开发进度，以下功能已完成并需编写测试用例：

### ✅ 已完成功能

1. **用户系统（USER）**
   - 微信授权登录（APP和小程序）
   - 手机验证码登录
   - 游客模式
   - 个人中心
   - 用户信息更新

2. **卜卦功能（DIV）**
   - 金钱课起卦（六爻生成算法）
   - 一键起卦
   - 基础解卦（卦象、卦辞、爻辞）
   - 详细解卦（变卦、互卦、应期分析）- 会员专享
   - 精准解卦（生辰八字个性化解读）- 会员专享

3. **学习路径（LRN）**
   - 六十四卦解读方法
   - 如何起卦
   - 八卦介绍
   - 如何看卦
   - 周易起源与历史
   - 课程测验

4. **每日一卦（DAILY）**
   - 每日卦象推送
   - 卦象展示（符号、名称、卦辞）
   - 分享功能

5. **历史记录（HIST）**
   - 卜卦记录查询（按时间排序）
   - 记录详情查看
   - 收藏/取消收藏

6. **会员支付（PAY）**
   - 会员购买（月卡、季卡、年卡）
   - 模拟支付流程
   - 会员权益管理
   - 订单查询

### 🚧 进行中功能

7. **UI界面（UI）**
   - 中国风设计系统
   - 底部导航栏（5个Tab）
   - 首页布局

### ⏳ 待开发功能

- 卦象查询（后续版本）
- 大师咨询（后续版本）
- 社区功能（后续版本）

---

## 六、测试用例目录组织结构

```
周易通V1.0测试用例集/
├─ 00-【通用规范】测试用例组织规则.md
├─ 01-【周易通V1.0】测试用例总纲.md
├─ 02-用户系统/
│   ├─ 02-【周易通V1.0】-【用户系统】-01-注册登录测试用例.md
│   └─ 02-【周易通V1.0】-【用户系统】-02-个人中心测试用例.md
├─ 03-卜卦功能/
│   ├─ 03-【周易通V1.0】-【卜卦功能】-01-起卦功能测试用例.md
│   ├─ 03-【周易通V1.0】-【卜卦功能】-02-基础解卦测试用例.md
│   ├─ 03-【周易通V1.0】-【卜卦功能】-03-详细解卦测试用例.md
│   └─ 03-【周易通V1.0】-【卜卦功能】-04-精准解卦测试用例.md
├─ 04-学习路径/
│   ├─ 04-【周易通V1.0】-【学习路径】-01-课程学习测试用例.md
│   └─ 04-【周易通V1.0】-【学习路径】-02-课程测验测试用例.md
├─ 05-每日一卦/
│   └─ 05-【周易通V1.0】-【每日一卦】-01-每日卦象测试用例.md
├─ 06-历史记录/
│   └─ 06-【周易通V1.0】-【历史记录】-01-记录管理测试用例.md
├─ 07-会员支付/
│   └─ 07-【周易通V1.0】-【会员支付】-01-会员购买测试用例.md
└─ 08-UI界面/
    └─ 08-【周易通V1.0】-【UI界面】-01-导航与布局测试用例.md
```

---

## 七、XMind导入说明

### 导入步骤
1. 打开XMind软件
2. 点击顶部菜单「文件」→「导入」→「Markdown」
3. 选择对应的测试用例Markdown文件
4. 确认导入

### 层级适配
- Markdown标题 `#` → XMind中心主题
- Markdown标题 `##` → XMind一级分支（功能模块）
- Markdown标题 `###` → XMind二级分支（功能点）
- Markdown标题 `####` → XMind三级分支（具体测试用例）
- 用例要素（ID、优先级等）以子节点形式展示

### 可视化优化建议
导入后可批量给节点添加颜色标识：
- **红色节点**：高优先级用例
- **橙色节点**：中优先级用例
- **灰色节点**：低优先级用例
- **蓝色节点**：功能测试类型
- **绿色节点**：性能测试类型
- **紫色节点**：异常测试类型

---

## 八、测试数据管理

### 测试账号

| 账号类型 | 微信OpenID | 手机号 | 用户类型 | 会员状态 |
|---------|-----------|--------|---------|---------|
| 正式用户 | o_test_001 | 13800138000 | 正式用户 | 免费用户 |
| 会员用户 | o_test_002 | 13800138001 | 正式用户 | VIP会员 |
| 游客用户 | - | - | 游客用户 | - |

### 卦象测试数据

| 卦名 | 序号 | 符号 | 测试场景 |
|-----|------|------|---------|
| 乾为天 | 1 | ䷀ | 全阳之卦，纯阳刚健 |
| 坤为地 | 2 | ䷁ | 全阴之卦，纯阴柔顺 |
| 水雷屯 | 3 | ䷂ | 刚柔始交，万物萌生 |
| 山水蒙 | 4 | ䷃ | 蒙童养正，启发智慧 |

---

## 九、测试环境要求

### 平台版本

| 平台 | 最低版本 | 推荐版本 | 备注 |
|------|---------|---------|------|
| iOS | 12.0+ | 15.0+ | 支持iPhone和iPad |
| Android | 8.0+ | 13.0+ | 支持主流品牌 |
| 微信小程序 | 基础库2.0+ | 基础库2.10+ | - |

### 网络环境
- WiFi环境
- 4G/5G移动网络
- 弱网环境（性能测试）

### 数据库环境
- MongoDB 4.4+
- Redis 6.0+

---

## 十、测试用例编写模板

### 模板示例

```markdown
#### 微信授权登录-首次登录 ZYT-USER-001

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已安装微信APP并登录
2. 周易通APP已获取微信授权
3. 网络连接正常

**测试步骤**：
1. 打开周易通APP
2. 点击首页"微信一键登录"按钮
3. 在微信授权弹窗中点击"同意"
4. 等待授权完成

**预期结果**：
1. APP跳转至微信授权页面
2. 显示授权提示（获取用户信息）
3. 授权成功后自动返回APP
4. 首页显示用户头像和昵称，自动登录成功
5. 个人中心显示用户信息（新用户）

**备注**：
- 首次登录自动创建用户账号
- 测试数据需使用真实微信OpenID
- 关联需求：DRD-PRD-3.2.1
```

---

## 十一、测试用例维护规范

### 用例更新时机
- 需求变更导致功能调整
- 发现新的测试场景
- 用例执行结果异常（需确认是否为缺陷）
- 版本迭代前回归测试准备

### 用例评审要求
- 新增模块测试用例需经过评审
- 评审人员：产品经理、开发负责人、测试负责人
- 评审重点：覆盖度、可执行性、预期结果明确性

### 用例版本管理
- 每次更新在文件头部记录版本号和更新日期
- 重大变更需保留历史版本
- 版本号格式：v1.0, v1.1, v2.0

---

## 十二、测试覆盖率要求

### 模块覆盖率

| 模块 | 语句覆盖率 | 分支覆盖率 | 功能点覆盖率 |
|------|-----------|-----------|-------------|
| 用户系统 | ≥80% | ≥75% | 100% |
| 卜卦功能 | ≥85% | ≥80% | 100% |
| 学习路径 | ≥70% | ≥65% | 90% |
| 每日一卦 | ≥70% | ≥65% | 90% |
| 会员支付 | ≥90% | ≥85% | 100% |

### 核心业务流程
- 金钱课起卦 → 基础解卦：100%覆盖
- 会员购买流程：100%覆盖
- 微信授权登录：100%覆盖

---

## 十三、测试用例执行规范

### 测试执行记录
- 执行日期：YYYY-MM-DD
- 执行人：姓名
- 执行环境：iOS/Android/小程序 + 版本号
- 执行结果：通过/失败/阻塞
- 缺陷编号：如失败，填写对应缺陷ID

### 缺陷报告规范

**缺陷ID格式**：`ZYT-BUG-序号-模块缩写`

**示例**：
```
ZYT-BUG-001-USER  微信授权失败后未返回登录页面
ZYT-BUG-002-DIV   金钱课起卦动画卡顿
ZYT-BUG-003-PAY   支付成功后会员状态未更新
```

---

## 十四、附录：术语表

| 术语 | 全称 | 说明 |
|------|------|------|
| 金钱课 | - | 传统起卦方法，通过摇掷三枚铜钱得出一卦 |
| 六爻 | - | 卦的六个爻位，从下到上依次为初爻到上爻 |
| 本卦 | - | 起卦得到的原始卦象 |
| 变卦 | - | 爻位变化后形成的新卦象 |
| 互卦 | - | 取本卦二、三、四爻组成下卦，三、四、五爻组成上卦 |
| 应期 | - | 卦象预测的时间范围或应验时机 |
| 卦辞 | - | 解释全卦含义的文字 |
| 爻辞 | - | 解释每一爻含义的文字 |
| 纳甲 | - | 将天干地支配入八卦和六十甲子的系统 |
| 生辰八字 | - | 人的出生年月日时，用于精准推算 |
