# 【周易通V1.0】-【卜卦功能】-基础解卦测试用例

## 文档信息

| 项目 | 内容 |
|------|------|
| 模块名称 | 卜卦功能 - 基础解卦 |
| 文档版本 | v1.0 |
| 编写日期 | 2026-01-14 |
| 文档状态 | 待评审 |

---

## 基础解卦功能

### 查看基础解卦

#### 查看基础解卦-免费用户 ZYT-DIV-016

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已登录（免费用户）
2. 已完成起卦
3. 网络连接正常

**测试步骤**：
1. 完成金钱课起卦
2. 自动跳转至解卦页面
3. 查看基础解卦内容

**预期结果**：
1. 页面显示主卦名称（如"乾为天"）
2. 页面显示主卦符号（如"䷀"）
3. 显示卦辞原文
4. 显示卦辞白话解释
5. 显示六爻爻辞原文（从初爻到上爻）
6. 显示六爻爻辞白话解释
7. 变爻标记显示（如有）
8. 页面提示"基础解卦（免费）"
9. 显示"查看详细解卦"入口（付费引导）
10. 所有内容完整显示，无缺失

**备注**：
- 基础解卦对所有用户免费
- 卦辞、爻辞来自传统通行本（王弼注本）
- 关联需求：PRD-3.3.2

---

#### 查看基础解卦-游客 ZYT-DIV-017

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户未登录（游客模式）
2. 已完成起卦
3. 游客次数未超限

**测试步骤**：
1. 游客完成金钱课起卦
2. 自动跳转至解卦页面
3. 查看基础解卦内容

**预期结果**：
1. 基础解卦内容正常显示
2. 卦名、卦辞、爻辞完整
3. 白话解释清晰易懂
4. 显示登录引导（如"登录后保存记录"）
5. 可正常浏览所有内容

**备注**：
- 游客可查看基础解卦
- 不保存历史记录
- 关联需求：PRD-3.2.2

---

#### 查看基础解卦-会员用户 ZYT-DIV-018

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 用户已登录（付费会员）
2. 已完成起卦
3. 会员未过期

**测试步骤**：
1. 会员用户完成起卦
2. 查看基础解卦内容

**预期结果**：
1. 基础解卦正常显示
2. 显示会员标识
3. 提供直接查看详细解卦入口
4. 无付费引导弹窗

**备注**：
- 会员用户可直接查看详细解卦
- 无额外付费引导

---

### 卦辞内容展示

#### 卦辞原文显示-完整准确 ZYT-DIV-019

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已完成起卦
2. 起得"乾为天"卦

**测试步骤**：
1. 查看基础解卦页面
2. 找到卦辞原文区域

**预期结果**：
1. 显示"乾，元，亨，利，贞。"
2. 文字完整准确
3. 标点符号正确
4. 格式清晰易读
5. 无乱码或错字

**备注**：
- 卦辞来源：传统通行本（王弼注本）
- 需验证64卦所有卦辞
- 内容准确性

---

#### 卦辞白话解释-清晰易懂 ZYT-DIV-020

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已完成起卦

**测试步骤**：
1. 查看基础解卦页面
2. 找到卦辞白话解释区域

**预期结果**：
1. 白话解释通俗易懂
2. 符合现代汉语表达习惯
3. 准确传达卦辞含义
4. 长度适中（100-200字）
5. 无语法错误
6. 格式分段合理

**备注**：
- 白话解释需专业团队整理
- 关联需求：PRD-6.1

---

### 爻辞内容展示

#### 爻辞原文显示-六爻完整 ZYT-DIV-021

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已完成起卦
2. 起得包含变爻的卦象

**测试步骤**：
1. 查看基础解卦页面
2. 滚动到爻辞区域
3. 检查六爻爻辞

**预期结果**：
1. 显示初爻爻辞原文（标注"初九"或"初六"）
2. 显示二爻爻辞原文（标注"九二"或"六二"）
3. 显示三爻爻辞原文
4. 显示四爻爻辞原文
5. 显示五爻爻辞原文
6. 显示上爻爻辞原文（标注"上九"或"上六"）
7. 爻位标注正确
8. 变爻有特殊标记（如红色或加粗）
9. 内容完整无缺失

**备注**：
- 六爻爻辞按顺序显示
- 变爻需突出显示
- 传统格式：初、二、三、四、五、上

---

#### 爻辞白话解释-逐爻对应 ZYT-DIV-022

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已完成起卦

**测试步骤**：
1. 查看基础解卦页面
2. 滚动到爻辞白话区域

**预期结果**：
1. 初爻白话解释紧接初爻原文
2. 每个爻都有对应的白话解释
3. 白话解释准确传达爻辞含义
4. 语言简洁明了
5. 格式清晰，原文与白话区分明显

**备注**：
- 原文与白话对照显示
- 便于理解

---

### 特殊卦象

#### 纯阳之卦-乾为天 ZYT-DIV-023

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 起得"乾为天"卦（六爻皆阳）

**测试步骤**：
1. 查看基础解卦页面

**预期结果**：
1. 卦名显示"乾为天"
2. 卦符显示"䷀"（六条实线）
3. 卦辞："乾，元，亨，利，贞。"
4. 爻辞完整显示
5. 特殊提示："此卦为纯阳之卦，六爻皆阳"

**备注**：
- 乾为天是纯阳卦
- 序号1，第一卦
- 特殊卦象验证

---

#### 纯阴之卦-坤为地 ZYT-DIV-024

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 起得"坤为地"卦（六爻皆阴）

**测试步骤**：
1. 查看基础解卦页面

**预期结果**：
1. 卦名显示"坤为地"
2. 卦符显示"䷁"（六条虚线）
3. 卦辞："坤，元，亨，利牝马之贞。"
4. 爻辞完整显示
5. 特殊提示："此卦为纯阴之卦，六爻皆阴"

**备注**：
- 坤为地是纯阴卦
- 序号2，第二卦
- 特殊卦象验证

---

#### 变卦显示-有变爻 ZYT-DIV-025

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 起得有变爻的卦象

**测试步骤**：
1. 查看基础解卦页面
2. 查找变卦信息

**预期结果**：
1. 显示主卦信息
2. 提示"此卦有X个变爻"
3. 列出变爻位置（如"二爻、三爻"）
4. 变爻用特殊标记显示（红色、加粗等）
5. 显示变卦名称（如有）
6. 提示"查看详细解卦了解变卦分析"

**备注**：
- 基础解卦提示变爻
- 详细分析需付费
- 引导用户购买会员

---

### 页面交互

#### 翻页查看-上下滑动 ZYT-DIV-026

**优先级**：中
**测试类型**：UI

**前置条件**：
1. 已进入基础解卦页面

**测试步骤**：
1. 在基础解卦页面上下滑动
2. 查看所有内容

**预期结果**：
1. 页面滚动流畅
2. 卦名卦符固定在顶部（可选）
3. 卦辞区域完整可见
4. 爻辞区域完整可见
5. 无内容截断
6. 加载速度快

**备注**：
- 用户体验优化
- 长页面优化

---

#### 返回首页-点击返回 ZYT-DIV-027

**优先级**：低
**测试类型**：UI

**前置条件**：
1. 已进入基础解卦页面

**测试步骤**：
1. 点击左上角返回按钮
2. 或使用手势返回

**预期结果**：
1. 返回至首页（起卦页面）
2. 或返回至上一个页面
3. 返回动画流畅
4. 无卡顿或闪退

**备注**：
- 基础导航功能
- 低优先级

---

### 数据验证

#### 基础解卦数据完整性 ZYT-DIV-028

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 数据库中已有64卦的完整数据

**测试步骤**：
1. 起得任意一卦
2. 查看基础解卦
3. 验证数据完整性

**预期结果**：
1.卦名字段不为空
2. 卦符字段不为空
3. 卦辞原文不为空
4. 卦辞白话不为空
5. 六爻爻辞原文都存在
6. 六爻爻辞白话都存在
7. 所有数据格式正确

**备注**：
- 需验证64卦所有数据
- 数据完整性测试
- 关联需求：PRD-6.1

---

#### 卦象序号正确性 ZYT-DIV-029

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 起得某卦

**测试步骤**：
1. 查看卦象数据
2. 验证序号

**预期结果**：
1. 序号字段在1-64范围内
2. 序号与卦名对应（如1=乾为天，2=坤为地）
3. 序号唯一且准确

**备注**：
- 64卦序号验证
- 数据准确性

---

### 异常处理

#### 起卦失败-无数据返回 ZYT-DIV-030

**优先级**：中
**测试类型**：异常

**前置条件**：
1. 网络连接正常

**测试步骤**：
1. 模拟后端数据查询失败
2. 完成起卦后查看解卦

**预期结果**：
1. 显示错误提示"解卦数据加载失败"
2. 提供"重试"按钮
3. 重试后正常显示
4. 不显示空白或崩溃

**备注**：
- 异常处理
- 用户体验

---

## 附录

### 测试数据

| 数据类型 | 示例值 | 用途 |
|---------|--------|------|
| 乾卦数据 | ䷀ 乾为天 | 纯阳卦验证 |
| 坤卦数据 | ䷁ 坤为地 | 纯阴卦验证 |
| 变爻示例 | 二爻、三爻变 | 变卦验证 |
| 爻辞标注 | 初九、六二、九三 | 爻位验证 |

### 64卦列表（部分示例）

| 序号 | 卦名 | 符号 | 测试状态 |
|------|------|------|----------|
| 1 | 乾为天 | ䷀ | ✅ |
| 2 | 坤为地 | ䷁ | ✅ |
| 3 | 水雷屯 | ䷂ | 待测 |
| 4 | 山水蒙 | ䷃ | 待测 |
| ... | ... | ... | ... |

### 基础解卦数据结构

```typescript
{
  hexagramName: "乾为天",
  guaci: "乾，元，亨，利，贞。",
  guaciTranslation: "乾卦象征天，元始、亨通、和谐有利、正固持久。",
  yaoci: [
    {
      position: 1,
      original: "初九：潜龙，勿用。",
      translation: "初九：龙潜伏在水中，暂时不宜有所作为。"
    },
    {
      position: 2,
      original: "九二：见龙在田，利见大人。",
      translation: "九二：龙出现在田野上，有利于拜见有权势的人。"
    }
    // ... 其他爻
  ]
}
```

### 测试环境要求

| 环境项 | 要求 |
|--------|------|
| 数据库 | MongoDB 4.4+，包含64卦完整数据 |
| 网络 | 正常网络 |
| 设备 | iOS/Android/小程序 |
| 用户类型 | 免费用户、游客、会员 |

### 相关文档

- PRD文档：`.taskmaster/docs/prd.md`
- 测试用例组织规则：`docs/test-rule/00-【周易通V1.0】测试用例组织规则.md`
- 卜卦Schema：`src/database/schemas/divination-record.schema.ts`
- 卦象数据：`src/database/data/hexagrams-data.ts`

---

## 更新记录

| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|----------|--------|
| v1.0 | 2026-01-14 | 初始版本，完成15条测试用例设计 | Claude |
