# 【周易通V1.0】-【学习路径】-课程测验测试用例

## 文档信息

| 项目 | 内容 |
|------|------|
| 模块名称 | 学习路径 - 课程测验 |
| 文档版本 | v1.0 |
| 编写日期 | 2026-01-14 |
| 文档状态 | 待评审 |

---

## 课程测验功能

### 开始测验

#### 开始测验-登录用户 ZYT-LRN-014

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已登录
2. 已完成课程阅读
3. 课程有测验

**测试步骤**：
1. 在课程阅读页面
2. 滚动到课程末尾
3. 点击"开始测验"按钮
4. 进入测验页面

**预期结果**：
1. 进入测验页面
2. 显示测验说明：
   - 题目数量
   - 及格分数
   - 答题时间限制（如无限制）
3. 显示第一题
4. 题目类型：单选题或多选题
5. 题目内容清晰
6. 选项显示完整

**备注**：
- 每个课程后有测验
- 检验学习效果
- 关联需求：PRD-3.4.2

---

#### 开始测验-游客-引导登录 ZYT-LRN-015

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 游客模式
2. 已完成课程阅读

**测试步骤**：
1. 在课程页面点击"开始测验"

**预期结果**：
1. 弹出登录引导
2. 提示"请登录后参加测验"
3. 说明"登录后保存测验成绩"
4. 提供"立即登录"按钮

**备注**：
- 测验需登录
- 游客引导登录

---

### 答题功能

#### 单选题-选择答案 ZYT-LRN-016

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已进入测验页面
2. 当前题为单选题

**测试步骤**：
1. 查看题目内容
2. 查看选项（A、B、C、D）
3. 点击选择一个选项
4. 确认选择
5. 点击"下一题"按钮

**预期结果**：
1. 题目内容清晰
2. 选项显示为单选形式
3. 选择后选项高亮
4. 可修改选择
5. 点击下一题后进入下一题
6. 答案已记录

**备注**：
- 单选题只能选一个
- 支持修改答案

---

#### 多选题-选择答案 ZYT-LRN-017

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已进入测验页面
2. 当前题为多选题

**测试步骤**：
1. 查看题目内容
2. 查看选项
3. 点击选择多个选项
4. 确认选择
5. 点击"下一题"

**预期结果**：
1. 题目标注"多选题"
2. 选项可多选
3. 选择后选项高亮
4. 可取消选择
5. 至少选择一个
6. 点击下一题后记录答案

**备注**：
- 多选题可选多个
- 至少选一个

---

#### 答题进度-保存当前答案 ZYT-LRN-018

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 正在答题中

**测试步骤**：
1. 回答第1题
2. 点击"下一题"
3. 回答第2题
4. 返回查看第1题

**预期结果**：
1. 已答题目答案已保存
2. 可返回修改答案
3. 答题进度显示（如"3/5"）
4. 未答题目标注

**备注**：
- 答题进度实时保存
- 支持修改答案

---

### 提交测验

#### 提交测验-全部完成 ZYT-LRN-019

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已回答所有题目

**测试步骤**：
1. 最后一题答完后
2. 点击"提交测验"按钮
3. 查看测验结果

**预期结果**：
1. 显示测验结果页面
2. 显示得分
3. 显示总分
4. 显示正确率（百分比）
5. 显示是否通过
6. 显示正确题目数
7. 显示总题目数
8. 显示每题答案详情

**备注**：
- 及格标准：60分
- 不强制答对
- 关联需求：PRD-3.4.2

---

#### 提交测验-部分未答 ZYT-LRN-020

**优先级**：中
**测试类型**：异常

**前置条件**：
1. 正在答题中
2. 有题目未回答

**测试步骤**：
1. 有题目未答
2. 点击"提交测验"

**预期结果**：
1. 弹出确认提示："有题目未作答，确认提交？"
2. 显示未答题目数量
3. 提供"继续答题"按钮
4. 提供"确认提交"按钮
5. 确认后提交并显示结果

**备注**：
- 允许提交未完成的测验
- 二次确认避免误操作

---

### 测验结果

#### 测验通过-显示通过状态 ZYT-LRN-021

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已提交测验
2. 成绩≥60分

**测试步骤**：
1. 查看测验结果页面

**预期结果**：
1. 显示"恭喜通过"提示
2. 显示得分（如"80分"）
3. 显示通过标识
4. 显示每题答案详情
5. 正确答案显示为绿色
6. 错误答案显示为红色
7. 显示正确答案（针对错题）
8. 提供"返回课程列表"按钮

**备注**：
- 及格分数：60分
- 通过后解锁下一课程（如有顺序）

---

#### 测验未通过-显示未通过状态 ZYT-LRN-022

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 已提交测验
2. 成绩<60分

**测试步骤**：
1. 查看测验结果页面

**预期结果**：
1. 显示"未通过"提示
2. 显示得分（如"50分"）
3. 显示未通过标识
4. 显示每题答案详情
5. 提示"继续努力"
6. 提供"重新测验"按钮
7. 可重测验

**备注**：
- 不强制答对
- 可重测验
- 关联需求：PRD-3.4.2

---

#### 答案详情-显示正确答案 ZYT-LRN-023

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 已查看测验结果

**测试步骤**：
1. 滚动查看每题详情

**预期结果**：
1. 显示题目内容
2. 显示用户选择
3. 显示正确答案
4. 显示是否正确
5. 错题有答案解释（如有）
6. 格式清晰

**备注**：
- 答案详情帮助学习
- 错题分析

---

### 测验统计

#### 测验记录-保存成绩 ZYT-LRN-024

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已登录
2. 已完成测验

**测试步骤**：
1. 完成测验
2. 查看学习进度

**预期结果**：
1. 测验成绩已保存
2. 课程进度显示测验状态
3. 显示测验分数
4. 显示是否通过
5. 显示测验次数

**备注**：
- 测验成绩记录
- 更新学习统计

---

#### 测验记录-多次测验 ZYT-LRN-025

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 已完成一次测验

**测试步骤**：
1. 点击"重新测验"
2. 再次答题并提交
3. 查看测验记录

**预期结果**：
1. 记录最新成绩
2. 记录测验次数+1
3. 可查看历史成绩
4. 显示最高分

**备注**：
- 支持多次测验
- 记录每次成绩

---

## 附录

### 测试数据

| 数据类型 | 示例值 | 用途 |
|---------|--------|------|
| 题目类型 | 单选题/多选题 | 测验类型 |
| 题目数量 | 5题 | 题量统计 |
| 及格分数 | 60分 | 及格标准 |
| 测验得分 | 80分 | 成绩示例 |
| 测验状态 | 通过/未通过 | 状态测试 |

### 测验数据结构

```typescript
// 题目
{
  id: "q001",
  type: "single",  // 或 "multiple"
  question: "八卦中，乾卦的符号是什么？",
  options: [
    { id: "A", text: "☰", correct: true },
    { id: "B", text: "☷", correct: false },
    { id: "C", text: "☲", correct: false },
    { id: "D", text: "☳", correct: false }
  ],
  points: 10
}

// 测验结果
{
  score: 80,           // 得分
  totalScore: 100,     // 总分
  percentage: 80,      // 正确率
  passed: true,        // 是否通过
  correctAnswers: 4,   // 正确题数
  totalQuestions: 5    // 总题数
}
```

### 测试环境要求

| 环境项 | 要求 |
|--------|------|
| 课程数据 | 包含测验题目 |
| 登录状态 | 需登录 |
| 网络 | 正常网络 |

### 相关文档

- PRD文档：`.taskmaster/docs/prd.md`
- 测试用例组织规则：`docs/test-rule/00-【周易通V1.0】测试用例组织规则.md`
- 学习服务：`src/modules/learning/learning.service.ts`
- 课程Schema：`src/database/schemas/course.schema.ts`

---

## 更新记录

| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|----------|--------|
| v1.0 | 2026-01-14 | 初始版本，完成12条测试用例设计 | Claude |
