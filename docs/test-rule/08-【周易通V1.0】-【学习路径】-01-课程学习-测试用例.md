# 【周易通V1.0】-【学习路径】-课程学习测试用例

## 文档信息

| 项目 | 内容 |
|------|------|
| 模块名称 | 学习路径 - 课程学习 |
| 文档版本 | v1.0 |
| 编写日期 | 2026-01-14 |
| 文档状态 | 待评审 |

---

## 课程学习功能

### 查看课程列表

#### 查看课程列表-成功加载 ZYT-LRN-001

**优先级**：高
**测试类型**：功能

**前置条件**：
1. APP已启动
2. 网络连接正常

**测试步骤**：
1. 点击底部导航栏"学习"Tab
2. 进入学习路径页面
3. 查看课程模块列表

**预期结果**：
1. 成功进入学习路径页面
2. 显示5个课程模块（按顺序）：
   - 六十四卦解读方法
   - 如何起卦
   - 八卦介绍
   - 如何看卦
   - 周易起源与历史
3. 每个模块显示：
   - 模块标题
   - 模块描述
   - 预计学习时间
   - 课程数量
4. 显示总体学习进度（如"已完成1/5"）
5. 页面加载流畅

**备注**：
- 5个课程模块按学习顺序排列
- 关联需求：PRD-3.4.1

---

#### 查看课程列表-游客 ZYT-LRN-002

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 用户未登录（游客模式）

**测试步骤**：
1. 点击底部导航栏"学习"Tab
2. 查看课程列表

**预期结果**：
1. 可正常浏览课程列表
2. 显示所有课程模块
3. 但无学习进度记录
4. 提示"登录后保存学习进度"

**备注**：
- 游客可浏览但无进度记录
- 关联需求：PRD-3.2.2

---

#### 课程模块-点击进入课程详情 ZYT-LRN-003

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 在学习路径页面

**测试步骤**：
1. 点击"六十四卦解读方法"模块
2. 查看该模块下的课程列表

**预期结果**：
1. 进入模块详情页面
2. 显示该模块的所有课程
3. 每个课程显示：
   - 课程标题
   - 课程描述
   - 预计阅读时间
   - 难度等级
   - 完成状态（未完成/已完成）
4. 显示"继续学习"按钮（如有进度）

**备注**：
- 按课程顺序显示

---

### 阅读课程内容

#### 阅读课程-文字内容 ZYT-LRN-004

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 已登录或游客
2. 进入课程阅读页面

**测试步骤**：
1. 点击任意课程
2. 进入课程阅读页面
3. 阅读文字内容
4. 上下滑动浏览

**预期结果**：
1. 课程内容完整显示
2. 文字清晰易读
3. 字体大小适宜
4. 支持上下滑动
5. 滚动流畅
6. 内容格式规范（段落、标题）
7. 无内容缺失或截断

**备注**：
- 课程内容1-3分钟阅读
- 支持离线阅读
- 关联需求：PRD-3.4.2

---

#### 阅读课程-图片展示 ZYT-LRN-005

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 进入包含图片的课程

**测试步骤**：
1. 滚动到图片位置
2. 查看图片展示

**预期结果**：
1. 图片清晰显示
2. 图片加载成功
3. 图片有说明文字（caption）
4. 图片与文字内容配合
5. 支持点击放大查看

**备注**：
- 辅助理解的配图
- 八卦、六十四卦图示

---

#### 阅读课程-示意图解 ZYT-LRN-006

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 进入包含图示的课程

**测试步骤**：
1. 查看八卦示意图
2. 查看六十四卦图示

**预期结果**：
1. 图示清晰准确
2. 卦符正确显示
3. 有说明文字
4. 图示有助于理解

**备注**：
- 八卦、六十四卦等图示
- 辅助学习

---

### 学习进度保存

#### 学习进度-自动保存 ZYT-LRN-007

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已登录

**测试步骤**：
1. 阅读课程内容
2. 停留阅读超过10秒
3. 返回课程列表

**预期结果**：
1. 阅读时长自动记录
2. 课程状态更新为"进行中"
3. 学习列表显示进度标记
4. 下次进入可继续阅读

**备注**：
- 自动保存阅读进度
- 仅登录用户保存
- 关联需求：PRD-3.6.3

---

#### 学习进度-游客不保存 ZYT-LRN-008

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 游客模式

**测试步骤**：
1. 游客阅读课程
2. 阅读完成后返回
3. 再次进入学习页面

**预期结果**：
1. 可正常阅读课程
2. 无学习进度记录
3. 返回后进度丢失
4. 提示"登录后保存学习进度"

**备注**：
- 游客不保存进度
- 引导登录

---

#### 学习进度-标记完成 ZYT-LRN-009

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已登录
2. 阅读完课程内容

**测试步骤**：
1. 阅读到课程末尾
2. 点击"标记为完成"按钮
3. 或系统自动标记完成

**预期结果**：
1. 课程状态更新为"已完成"
2. 完成时间记录
3. 总体进度更新（如"已完成2/5"）
4. 课程列表显示完成标记✓
5. 返回后显示完成状态

**备注**：
- 手动或自动标记完成
- 更新总体进度

---

### 学习完成奖励

#### 完成所有课程-解锁奖励 ZYT-LRN-010

**优先级**：高
**测试类型**：功能

**前置条件**：
1. 用户已完成前4个课程
2. 需要完成最后一个课程

**测试步骤**：
1. 完成最后一个课程
2. 标记为完成

**预期结果**：
1. 总体进度显示"5/5已完成"
2. 弹出恭喜提示："恭喜完成全部课程！"
3. 提示："您已获得免费详细解卦奖励"
4. 奖励状态更新为available=true
5. 可在卜卦时使用该奖励

**备注**：
- 完成所有课程解锁奖励
- 免费详细解卦1次
- 关联需求：PRD-3.4.3

---

#### 使用完成奖励-免费详细解卦 ZYT-LRN-011

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 用户已完成所有课程
2. 奖励available=true
3. 未使用过奖励

**测试步骤**：
1. 完成一次金钱课起卦
2. 点击"查看详细解卦"
3. 选择"使用完成奖励"

**预期结果**：
1. 可直接查看详细解卦
2. 无需付费
3. 奖励状态更新为used=true
4. 记录使用时间和卜卦ID
5. 提示"奖励已使用"

**备注**：
- 完成奖励：免费详细解卦1次
- 仅可使用一次

---

#### 使用完成奖励-已使用 ZYT-LRN-012

**优先级**：中
**测试类型**：异常

**前置条件**：
1. 用户已使用过完成奖励

**测试步骤**：
1. 完成一次新的起卦
2. 尝试使用完成奖励

**预期结果**：
1. 提示"奖励已使用"
2. 不可再次使用
3. 引导购买会员或单次购买

**备注**：
- 奖励仅一次
- 用完即止

---

### 学习统计

#### 查看学习统计-阅读时长 ZYT-LRN-013

**优先级**：中
**测试类型**：功能

**前置条件**：
1. 用户已登录
2. 有学习记录

**测试步骤**：
1. 进入个人中心
2. 查看"学习进度"区域
3. 查看统计信息

**预期结果**：
1. 显示累计学习时长（如"已学习2小时"）
2. 显示已完成课程数
3. 显示总进度百分比
4. 数据准确

**备注**：
- 学习统计激励用户
- 关联需求：PRD-3.2.4

---

## 附录

### 测试数据

| 数据类型 | 示例值 | 用途 |
|---------|--------|------|
| 课程模块 | 六十四卦解读方法 | 模块列表测试 |
| 课程标题 | 六十四卦的整体结构 | 课程详情测试 |
| 阅读时长 | 120秒 | 进度记录测试 |
| 完成状态 | 已完成/未完成 | 状态测试 |

### 课程模块列表

| 序号 | 模块名称 | 课程数 | 预计时间 |
|------|----------|--------|----------|
| 1 | 六十四卦解读方法 | 1 | 3分钟 |
| 2 | 如何起卦 | 1 | 2分钟 |
| 3 | 八卦介绍 | 1 | 3分钟 |
| 4 | 如何看卦 | 1 | 2分钟 |
| 5 | 周易起源与历史 | 1 | 3分钟 |

### 学习进度数据结构

```typescript
{
  progress: {
    completed: 2,      // 已完成2个课程
    total: 5,          // 总共5个课程
    percentage: 40,     // 完成度40%
    lastCourseId: "course_002"
  },
  courses: [
    {
      id: "course_001",
      name: "六十四卦解读方法",
      completed: true,
      readingTime: 180   // 阅读时长（秒）
    }
  ]
}
```

### 测试环境要求

| 环境项 | 要求 |
|--------|------|
| 课程数据 | 包含5个模块的课程数据 |
| 网络 | 正常网络、离线环境 |
| 设备 | iOS/Android/小程序 |

### 相关文档

- PRD文档：`.taskmaster/docs/prd.md`
- 测试用例组织规则：`docs/test-rule/00-【周易通V1.0】测试用例组织规则.md`
- 学习服务：`src/modules/learning/learning.service.ts`
- 课程Schema：`src/database/schemas/course.schema.ts`

---

## 更新记录

| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|----------|--------|
| v1.0 | 2026-01-14 | 初始版本，完成13条测试用例设计 | Claude |
